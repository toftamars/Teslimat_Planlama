<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- AraÃ§ Kapatma Tree View -->
    <record id="view_teslimat_arac_kapatma_tree" model="ir.ui.view">
        <field name="name">teslimat.arac.kapatma.tree</field>
        <field name="model">teslimat.arac.kapatma</field>
        <field name="arch" type="xml">
            <tree string="AraÃ§ Kapatma KayÄ±tlarÄ±" 
                  decoration-danger="not aktif"
                  decoration-warning="aktif"
                  decoration-success="not aktif">
                <field name="arac_id"/>
                <field name="baslangic_tarihi"/>
                <field name="bitis_tarihi"/>
                <field name="gun_sayisi" string="GÃ¼n"/>
                <field name="sebep"/>
                <field name="kapatan_kullanici_id"/>
                <field name="aktif" widget="boolean_toggle"/>
            </tree>
        </field>
    </record>

    <!-- AraÃ§ Kapatma Form View -->
    <record id="view_teslimat_arac_kapatma_form" model="ir.ui.view">
        <field name="name">teslimat.arac.kapatma.form</field>
        <field name="model">teslimat.arac.kapatma</field>
        <field name="arch" type="xml">
            <form string="AraÃ§ Kapatma DetayÄ±">
                <header>
                    <button name="action_iptal_et" string="Ä°ptal Et" type="object" 
                            class="btn-warning"
                            attrs="{'invisible': [('aktif', '=', False)]}"/>
                    <button name="action_aktif_et" string="Tekrar Aktif Et" type="object" 
                            class="btn-success"
                            attrs="{'invisible': [('aktif', '=', True)]}"/>
                    <field name="aktif" widget="statusbar" statusbar_visible="1"/>
                </header>
                
                <sheet>
                    <!-- UyarÄ± MesajÄ± - KapalÄ± kayÄ±t -->
                    <div class="alert alert-danger" role="alert" attrs="{'invisible': [('aktif', '=', True)]}">
                        <i class="fa fa-ban"/> Bu kapatma kaydÄ± <strong>iptal edilmiÅŸ</strong>
                    </div>
                    
                    <!-- UyarÄ± MesajÄ± - Aktif kapatma -->
                    <div class="alert alert-warning" role="alert" 
                         attrs="{'invisible': [('aktif', '=', False)]}">
                        <i class="fa fa-exclamation-triangle"/> Bu araÃ§ <strong>kapalÄ±</strong>
                    </div>
                    
                    <div class="oe_title">
                        <h1>
                            <field name="display_name" readonly="1"/>
                        </h1>
                    </div>
                    
                    <group>
                        <group string="ğŸ“… Tarih Bilgileri">
                            <field name="baslangic_tarihi"/>
                            <field name="bitis_tarihi"/>
                            <field name="gun_sayisi" readonly="1"/>
                        </group>
                        <group string="ğŸš— AraÃ§ Bilgileri">
                            <field name="arac_id" options="{'no_create': True}"/>
                            <field name="sebep"/>
                        </group>
                    </group>
                    
                    <group string="ğŸ“ AÃ§Ä±klama">
                        <field name="aciklama" nolabel="1" placeholder="DetaylÄ± aÃ§Ä±klama giriniz..."/>
                    </group>
                    
                    <group>
                        <group string="ğŸ‘¤ Sistem Bilgileri">
                            <field name="kapatan_kullanici_id" readonly="1"/>
                            <field name="olusturma_tarihi" readonly="1"/>
                        </group>
                    </group>
                </sheet>
                
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- AraÃ§ Kapatma Search View -->
    <record id="view_teslimat_arac_kapatma_search" model="ir.ui.view">
        <field name="name">teslimat.arac.kapatma.search</field>
        <field name="model">teslimat.arac.kapatma</field>
        <field name="arch" type="xml">
            <search string="AraÃ§ Kapatma Ara">
                <field name="arac_id"/>
                <field name="sebep"/>
                <field name="kapatan_kullanici_id"/>
                
                <filter string="Aktif" name="filter_aktif" domain="[('aktif', '=', True)]"/>
                <filter string="Ä°ptal EdilmiÅŸ" name="filter_iptal" domain="[('aktif', '=', False)]"/>
                
                <separator/>
                <filter string="Devam Eden" name="filter_devam_eden" 
                        domain="[('baslangic_tarihi', '&lt;=', context_today()), ('bitis_tarihi', '&gt;=', context_today()), ('aktif', '=', True)]"/>
                <filter string="GeÃ§miÅŸ" name="filter_gecmis" 
                        domain="[('bitis_tarihi', '&lt;', context_today())]"/>
                <filter string="Gelecek" name="filter_gelecek" 
                        domain="[('baslangic_tarihi', '&gt;', context_today())]"/>
                
                <separator/>
                <group expand="0" string="Grupla">
                    <filter string="AraÃ§" name="group_arac" context="{'group_by': 'arac_id'}"/>
                    <filter string="Sebep" name="group_sebep" context="{'group_by': 'sebep'}"/>
                    <filter string="BaÅŸlangÄ±Ã§ Tarihi" name="group_baslangic" context="{'group_by': 'baslangic_tarihi'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_teslimat_arac_kapatma" model="ir.actions.act_window">
        <field name="name">AraÃ§ Kapatma KayÄ±tlarÄ±</field>
        <field name="res_model">teslimat.arac.kapatma</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_filter_aktif': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                HenÃ¼z araÃ§ kapatma kaydÄ± yok
            </p>
            <p>
                AraÃ§larÄ± belirli gÃ¼nlerde kapatabilir (bakÄ±m, arÄ±za, vb.) ve bu gÃ¼nler otomatik olarak "Uygun GÃ¼nler" listesinde gÃ¶rÃ¼nÃ¼r.
            </p>
        </field>
    </record>
</odoo>
